{"version":3,"sources":["webpack:///./src/views/admin/login.vue?f74e","webpack:///src/views/admin/login.vue","webpack:///./src/views/admin/login.vue?d78e","webpack:///./src/views/admin/login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","model","value","callback","$$v","active","expression","attrs","label","name","prefix-icon","placeholder","formData","$set","type","nativeOn","keyup","$event","indexOf","_k","keyCode","key","login","slot","src","code","alt","on","click","getCode","thirdPartyList","_l","icon","logo","title","thirdPartyIconClick","redirect_url","_e","_m","staticRenderFns","href","loginvue_type_script_lang_js_","data","autofocus","username","userpass","beforeRouteEnter","to","from","next","query","app_id","axios","post","then","res","is_need_bind","window","open","catch","created","getThirdParty","methods","showFind","$message","message","_this","$post","img","_this2","index","msg","setTimeout","close","$route","$router","push","document","getElementsByClassName","focus","_this3","url","admin_loginvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0ba2e6.096473dc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-login\"},[_c('div',{staticClass:\"login-box\"},[_c('h2',[_vm._v(\"文档管理系统\")]),_c('el-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('el-tab-pane',{attrs:{\"label\":\"账号登录\",\"name\":\"first\"}},[_c('div',{staticClass:\"login-form\"},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user-solid\",\"placeholder\":\"用户名/手机号\"},model:{value:(_vm.formData.username),callback:function ($$v) {_vm.$set(_vm.formData, \"username\", $$v)},expression:\"formData.username\"}}),_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-s-goods\",\"placeholder\":\"输入密码\"},model:{value:(_vm.formData.userpass),callback:function ($$v) {_vm.$set(_vm.formData, \"userpass\", $$v)},expression:\"formData.userpass\"}}),_c('el-input',{staticClass:\"code-input\",attrs:{\"prefix-icon\":\"el-icon-s-goods\",\"placeholder\":\"输入图形验证码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}},model:{value:(_vm.formData.code),callback:function ($$v) {_vm.$set(_vm.formData, \"code\", $$v)},expression:\"formData.code\"}},[_c('img',{attrs:{\"slot\":\"append\",\"src\":_vm.code,\"alt\":\"\"},on:{\"click\":_vm.getCode},slot:\"append\"})])],1),(_vm.thirdPartyList.length)?_c('div',{staticClass:\"login-thirdParty\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"第三方账号登录\")]),_c('div',{staticClass:\"icon-list\"},_vm._l((_vm.thirdPartyList),function(icon){return _c('img',{key:icon.name,staticClass:\"icon-block\",attrs:{\"src\":icon.logo,\"title\":icon.name},on:{\"click\":function($event){return _vm.thirdPartyIconClick(icon.redirect_url)}}})}),0)]):_vm._e(),_c('el-button',{staticClass:\"login-btn\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1)],1),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"footer\"},[_vm._v(\"\\n    Powered by \"),_c('a',{attrs:{\"href\":\"https://www.w7.cc\"}},[_vm._v(\"微擎云计算©www.w7.cc\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"admin-login\">\n    <div class=\"login-box\">\n      <h2>文档管理系统</h2>\n      <el-tabs v-model=\"active\">\n        <el-tab-pane label=\"账号登录\" name=\"first\">\n          <div class=\"login-form\">\n            <el-input v-model=\"formData.username\" prefix-icon=\"el-icon-user-solid\" placeholder=\"用户名/手机号\"></el-input>\n            <el-input type=\"password\" v-model=\"formData.userpass\" prefix-icon=\"el-icon-s-goods\" placeholder=\"输入密码\"></el-input>\n            <el-input class=\"code-input\" v-model=\"formData.code\" prefix-icon=\"el-icon-s-goods\" placeholder=\"输入图形验证码\" @keyup.enter.native=\"login\">\n              <img :src=\"code\" @click=\"getCode\" slot=\"append\" alt=\"\">\n            </el-input>\n          </div>\n          <!-- <div class=\"login-action\">\n            <el-button type=\"text\" @click=\"showFind\">找回密码?</el-button>\n          </div> -->\n          <div class=\"login-thirdParty\" v-if=\"thirdPartyList.length\">\n            <span class=\"title\">第三方账号登录</span>\n            <div class=\"icon-list\">\n              <img class=\"icon-block\"\n                v-for=\"icon in thirdPartyList\" :key=\"icon.name\"\n                :src=\"icon.logo\"\n                :title=\"icon.name\"\n                @click=\"thirdPartyIconClick(icon.redirect_url)\">\n            </div>\n          </div>\n          <el-button class=\"login-btn\" @click=\"login\">登录</el-button>\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n    <div class=\"footer\">\n      Powered by <a href=\"https://www.w7.cc\">微擎云计算©www.w7.cc</a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from '@/utils/axios'\nexport default {\n  name: 'adminLogin',\n  data() {\n    return {\n      autofocus: false,\n      active: 'first',\n      code: '',\n      formData: {\n        username: '',\n        userpass: '',\n        code: ''\n      },\n      thirdPartyList: []\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    let code = to.query.code//第三方登录成功之后返回的code\n    let redirect_url = to.query.redirect_url//需要跳转的url\n    let app_id = to.query.app_id\n    if (code) {\n      axios.post('/common/auth/third-party-login', {\n        code,\n        app_id\n      })\n        .then(res => {\n          if (res && res.is_need_bind) {//跳转到绑定\n            next('/bind')\n          } else {\n            if (!redirect_url) {\n              next('/admin/document')\n            } else {\n              window.open(redirect_url, '_self')\n            }\n          }\n        })\n        .catch(() => {\n          next('/login')\n        })\n    } else {\n      axios.post('/common/auth/default-login-url')\n        .then(res => {\n          if (res) {\n            window.open(res, '_self')\n          } else {\n            next()\n          }\n        })\n    }\n  },\n  created () {\n    this.getCode()\n    this.getThirdParty()\n  },\n  methods: {\n    showFind() {\n      this.$message({message: '请联系管理员修改或使用密码找回工具修改'})\n    },\n    getCode() {\n      this.$post('/common/verifycode/image')\n        .then(res => {\n          if(res.img) {\n            this.code = res.img\n          }\n        })\n    },\n    login() {\n      for(let index in this.formData) {\n        if(!this.formData[index]) {\n          this.$message('请填写完整表单')\n          return false\n        }\n      }\n      this.$post('/common/auth/login', this.formData)\n        .then(() => {\n          let msg = this.$message('登录成功')\n          setTimeout(() => {\n            msg.close()\n            if (this.$route.query && this.$route.query.redirect_url) {\n              window.open(this.$route.query.redirect_url, '_self')\n            } else {\n              this.$router.push('/admin/document')\n            }\n          }, 500)\n        }).catch(() => {\n          this.formData.code = ''\n          document.getElementsByClassName(\"el-input__inner\")[2].focus()\n          this.getCode()\n        })\n    },\n    getThirdParty() {\n      this.$post('/common/auth/method', {\n        redirect_url: this.$route.query.redirect_url\n      })\n        .then(res => {\n          this.thirdPartyList = res || []\n        })\n    },\n    thirdPartyIconClick(url) {\n      window.open(url, '_self')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=1922c00b&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}